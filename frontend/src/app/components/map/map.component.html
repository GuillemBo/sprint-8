<!-- src/app/components/map/map.component.html -->

<div>
    <h2>Puntos del Mapa</h2>
    
    <!-- Contenedor para el mapa de Leaflet -->
    <div id="map" style="height: 500px;"></div>
  

    
    <div class="w-full h-auto max-h-screen p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 dark:bg-gray-800 dark:border-gray-700">
      <form [formGroup]="newPointForm" (ngSubmit)="onSubmit()" class="space-y-6" action="#">
          <h5 class="text-xl font-medium text-gray-900 dark:text-white">Añadir un nuevo punto</h5>
          
          <div class="grid grid-cols-4 gap-4">
            <div>
              <label class="block">
                Nombre:
                <input formControlName="name" type="text" placeholder="Nombre del punto" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" required />
              </label>
            </div>
            <div>
              <label class="block">
                Descripción:
                <input formControlName="description" type="text" placeholder="Descripción del punto" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" required />
              </label>
            </div>
            <div>
              <label class="block">
                Latitud:
                <input formControlName="latitude" type="number" placeholder="Latitud" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" required />
              </label>
            </div>
            <div>
              <label class="block">
                Longitud:
                <input formControlName="longitude" type="number" placeholder="Longitud" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white" required />
              </label>
            </div>
          </div>
    
          <button type="submit" [disabled]="newPointForm.invalid" class="text-white disabled:bg-gray-400 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Agregar punto</button>
      </form>
    </div>
  </div>
  
  <h5 class="text-xl font-medium text-gray-900 dark:text-white mt-5">Lista de puntos</h5>
  <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
    <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
        <tr>
            <th scope="col" class="px-6 py-3">
                Nombre
            </th>
            <th scope="col" class="px-6 py-3">
                Descripcion
            </th>
            <th scope="col" class="px-6 py-3">
                Longitud
            </th>
            <th scope="col" class="px-6 py-3">
                Latitud
            </th>
            <th scope="col" class="px-6 py-3">
                <!-- Acciones -->
            </th>
        </tr>
    </thead>
    @for (point of mapPoints; track $index) {
    <tbody>
        <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
            <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                {{ point.name }}
            </th>
            <td class="px-6 py-4">
                {{ point.description }}
            </td>
            <td class="px-6 py-4">
                {{ point.latitude }}
            </td>
            <td class="px-6 py-4">
                {{ point.longitude }}
            </td>
            <td class="px-6 py-4 space-x-4">
                <button (click)="deleteMapPoint(point.id)"
                    class="px-3 py-2 text-xs font-medium text-center inline-flex items-center text-white bg-neutral-400 rounded-lg hover:bg-neutral-500 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                    Eliminar
                </button>
            </td>
        </tr>
    </tbody>
    }
</table>